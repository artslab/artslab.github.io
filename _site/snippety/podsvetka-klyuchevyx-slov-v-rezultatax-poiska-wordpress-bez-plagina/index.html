<p>Данный сниппет позволит выделить поисковую фразу в результатах поиска по сайта без использования каких-либо дополнительных WordPress-плагинов. Пример на скриншоте:</p>

<center>
  <a href="http://img.artslab.info/podsvetka_poiskovoi_frazi.png"><img src="http://img.artslab.info/podsvetka_poiskovoi_frazi-300x136.png" alt="подсветка результата" class="aligncenter size-medium wp-image-7840" srcset="http://img.artslab.info/podsvetka_poiskovoi_frazi-300x136.png 300w, http://img.artslab.info/podsvetka_poiskovoi_frazi.png 723w" sizes="(max-width: 300px) 100vw, 300px" /></a>
</center>

<!--more-->

<p>Нижепреведенный код с 2 функциями необходимо добавить в файл functions.php:</p>

<p>[php title=”functions.php”]</p>

<p>function search_excerpt_highlight() {</p>

<p>$excerpt = get_the_excerpt();</p>

<table>
  <tbody>
    <tr>
      <td>$keys = implode(‘</td>
      <td>’, explode(‘ ‘, get_search_query()));</td>
    </tr>
  </tbody>
</table>

<p>$excerpt = preg_replace(‘/(‘ . $keys .’)/iu’, ‘<strong class="search-highlight">\0</strong>’, $excerpt);</p>

<p>echo ‘&lt;p&gt;’ . $excerpt . ‘&lt;/p&gt;’;</p>

<p>}</p>

<p>function search_title_highlight() {</p>

<p>$title = get_the_title();</p>

<table>
  <tbody>
    <tr>
      <td>$keys = implode(‘</td>
      <td>’, explode(‘ ‘, get_search_query()));</td>
    </tr>
  </tbody>
</table>

<p>$title = preg_replace(‘/(‘ . $keys .’)/iu’, ‘<strong class="search-highlight">\0</strong>’, $title);</p>

<p>echo $title;</p>

<p>}</p>

<p>[/php]</p>

<p>Теперь перейдем в файл search.php отвечающий за отображение результатов поиска. В нем необходимо заменить 2 стандартные функций на наши новые функций, которые мы только что переписали. the_title() на search_title_highlight() и the_excerpt(), соответственно на search_excerpt_highlight().</p>

<p>В style.css можно добавить класс для того чтобы выделить найденную фразу с помощью фона:</p>

<p>[css title=”style.css”]</p>

<p>.search-highlight {</p>

<p>background:#FFFFB6;</p>

<p>}</p>

<p>[/css]</p>

<p><a href="http://wordpress.stackexchange.com/questions/16070/how-to-highlight-search-terms-without-plugin" target="_blank">Источник</a></p>
