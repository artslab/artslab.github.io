<p>Если при разработке своего плагина для WordPress вы хотите использовать базу данных MySQL, то самый правильный момент для создания необходимой таблицы, это момент активаций плагина. Для этого мы воспользуемся методом <em>register_activation_hook()</em>, который зарегистрирует нашу функцию с запросом к базе данных и выполнит ее во время активаций нашего плагина.</p>

<p>Ниже готовый сниппет, который поможет вам выполнить необходимый запрос и создать таблицу со всеми необходимыми полями.</p>

<p>[php]</p>

<p>function create_db_table() {</p>

<p>global $wpdb;</p>

<p>// указываем название таблицу</p>

<p>$table_name = $wpdb-&gt;prefix.’event’;</p>

<p>// создаем запрос со всеми наобходимыми полями</p>

<p>$sql = “CREATE TABLE $table_name (</p>

<p>id mediumint(9) unsigned NOT NULL AUTO_INCREMENT,</p>

<p>eventId mediumint(9) NOT NULL,</p>

<p>authorId mediumint(9) NOT NULL,</p>

<p>content longtext NOT NULL,</p>

<p>PRIMARY KEY (id)</p>

<p>);”;</p>

<p>require_once(ABSPATH.’wp-admin/includes/upgrade.php’);</p>

<p>// выполняем запрос и создаем таблицу</p>

<p>dbDelta($sql);</p>

<p>}</p>

<p>// метод запускающий функцию create_db_table() при активаций плагина</p>

<p>register_activation_hook(__FILE__, ‘create_db_table’);</p>

<p>[/php]</p>
